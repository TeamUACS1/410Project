from django.shortcuts import render
from django.shortcuts import render_to_response
from django.template import RequestContext
from django.shortcuts import redirect

from main.models import Post 

def index(request):
	#Request the context of the request.
	#The context contains information such as the client's machine details for example.
	context =RequestContext(request)

	#Get all links

	posts = Post.objects.all()
	return render_to_response('main/index.html', {'posts': posts}, context)

def tags(request):
	return render_to_response('main/index.html', {'posts': posts}, context)

def tag(request, tag_name):
	return render_to_response('main/index.html', {'posts': posts}, context)

def add_link(request):
	context = RequestContext(request)
	if request.method == 'POST':
		url = request.POST.get("url", "")
		tags = request.POST.get("tags", "")
		title =request.POST.get("title", "")
		
    #creating and saving the tags
    tag= Tag(name=tags)
    tag.save()

    #creating links and saving links
    link =Link(title=tile, url=url)    
    link.save()

    #adding links and tags
    link.tag.add(tags)
    
	return redirect(index)
# Create your views here.
